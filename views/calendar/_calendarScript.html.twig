<script src='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.11/index.global.min.js'></script>
<script>
    const calendarEl = document.getElementById("calendar");
    document.addEventListener("DOMContentLoaded", function () {
        const openModal = (startDate, endDate) => {
            const modalCreateEvent = document.getElementById("modalCreateEvent")
            const startSelect = document.getElementById("start_select")
            const endSelect = document.getElementById("end_select")
            startSelect.value = startDate
            endSelect.value = endDate
            console.log(startDate)
            console.log(endDate)
            modalCreateEvent.showModal()
        }

        const calendar = new FullCalendar.Calendar(calendarEl, {
            customButtons: {
                newEvent: {
                    text: '+',
                    click: () => {
                        const modalCreateEvent = document.getElementById("modalCreateEvent")
                        modalCreateEvent.showModal()
                    }
                }
            },
            headerToolbar: {
                left: "prev,next today newEvent",
                center: "title",
                right: "dayGridMonth,timeGridWeek,timeGridDay",
            },
            buttonText: {
                today: "Aujourd'hui",
                dayGridMonth: "Mois",
                timeGridWeek: "Semaine",
                timeGridDay: "Jour",
            },
            views: {
                dayGrid: {
                    // options apply to dayGridMonth, dayGridWeek, and dayGridDay views
                },
                timeGrid: {
                    // options apply to timeGridWeek and timeGridDay views
                },
                week: {
                    // options apply to dayGridWeek and timeGridWeek views
                },
                day: {
                    // options apply to dayGridDay and timeGridDay views
                },
            },
            locale: "fr",
            initialView: "timeGridWeek",
            weekNumberCalculation: "ISO",
            weekNumbers: true,
            weekText: "S",
            weekTextLong: "Semaine",
            allDayContent: "Jour",
            selectable: true,
            select: (info) => {
                const startDate = info.startStr.slice(0, -9);
                const endDate = info.endStr.slice(0, -9);
                openModal(startDate, endDate);
            },
            eventClick: (info) => {
                alert(info.event.id)
            },
            eventSources: [
                '/get-trainings-events',
            ]
        });
        calendar.render();
    });
</script>
